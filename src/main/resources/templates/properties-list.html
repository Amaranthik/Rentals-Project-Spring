<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Rentals 2025</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f5f6f7; }
        .card { border: none; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .table-hover tbody tr:hover { background-color: #f1f1f1; }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4 shadow">
    <div class="container">
        <a class="navbar-brand fw-bold" href="/properties">üè† RENTALS SYSTEM</a>
        <div class="d-flex">
            <a href="/properties" class="btn btn-light me-2 fw-bold text-dark">–û–±—ä–µ–∫—Ç—ã</a>
            <a href="/bookings" class="btn btn-outline-light me-2">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</a>
            <a href="/users" class="btn btn-outline-light">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
        </div>
    </div>
</nav>

<div class="container">
    <div class="card p-4 mb-4">
        <div class="row align-items-center">
            <div class="col-md-8">
                <form action="/properties" method="get" class="d-flex gap-2">
                    <input type="text" name="keyword" class="form-control form-control-lg border-secondary"
                           th:value="${keyword}" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –≥–æ—Ä–æ–¥—É...">
                    <button type="submit" class="btn btn-dark btn-lg px-4">–ù–∞–π—Ç–∏</button>
                    <a href="/properties" class="btn btn-outline-secondary btn-lg">–°–±—Ä–æ—Å</a>
                </form>
            </div>
            <div class="col-md-4 text-end">
                <a href="/properties/new" class="btn btn-dark btn-lg shadow fw-bold">+ –ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç</a>
            </div>
        </div>
    </div>

    <div class="card overflow-hidden">
        <table class="table table-hover align-middle mb-0">
            <thead class="table-dark">
            <tr>
                <th class="ps-4">ID</th>
                <th>–û–±—ä–µ–∫—Ç</th>
                <th>–õ–æ–∫–∞—Ü–∏—è</th>
                <th>–¶–µ–Ω–∞</th>
                <th>–í–ª–∞–¥–µ–ª–µ—Ü</th>
                <th class="text-center">–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="prop : ${properties}">
                <td class="ps-4 text-muted fw-bold" th:text="${prop.id}"></td>
                <td>
                    <div class="fw-bold text-dark fs-5" th:text="${prop.title}"></div>
                    <span class="badge bg-secondary" th:text="${prop.propertyType}"></span>
                </td>
                <td>
                    <div class="fw-bold" th:text="${prop.city}"></div>
                    <small class="text-muted" th:text="${prop.address}"></small>
                </td>
                <td>
                    <div class="fw-bold fs-5" th:text="${prop.pricePerMonth} + ' ‚ÇΩ'"></div>
                    <small class="text-muted">–≤ –º–µ—Å—è—Ü</small>
                </td>
                <td>
                    <div class="d-flex align-items-center">
                        <div class="bg-light rounded-circle p-2 me-2 border">üë§</div>
                        <div>
                            <span class="fw-bold d-block" th:text="${prop.owner != null} ? ${prop.owner.fullName} : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'"></span>
                            <small class="text-muted" style="font-size: 0.8em;">Landlord</small>
                        </div>
                    </div>
                </td>
                <td class="text-center">
                    <a th:href="@{/properties/{id}/book(id=${prop.id})}" class="btn btn-warning btn-sm fw-bold me-2 shadow-sm">
                        üìÖ –ë—Ä–æ–Ω—å
                    </a>
                    <div class="btn-group shadow-sm">
                        <a th:href="@{/properties/edit/{id}(id=${prop.id})}" class="btn btn-outline-dark btn-sm">Edit</a>
                        <a th:href="@{/properties/delete/{id}(id=${prop.id})}" class="btn btn-outline-danger btn-sm"
                           onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã?');">X</a>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
        <div th:if="${properties.empty}" class="p-5 text-center text-muted">
            <h4>–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç</h4>
        </div>
    </div>
</div>
<footer class="text-center text-muted mt-5 mb-3"><small>&copy; 2025 Rentals System</small></footer>
</body>
</html>